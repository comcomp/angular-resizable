angular.module("angularResizable",[]).directive("resizable",function(){function e(e){void 0===t?(t=e,setTimeout(function(){t(),t=void 0},100)):t=e}var t;return{restrict:"AE",scope:{rDirections:"=",rCenteredX:"=",rCenteredY:"=",rWidth:"=",rHeight:"=",rFlex:"=",rGrabber:"@",rDisabled:"@",rNoThrottle:"=",resizable:"@"},link:function(t,n,r){if("false"!==t.resizable){var i="flexBasis"in document.documentElement.style?"flexBasis":"webkitFlexBasis"in document.documentElement.style?"webkitFlexBasis":"msFlexPreferredSize"in document.documentElement.style?"msFlexPreferredSize":"flexBasis";t.$watch("rWidth",function(e){n[0].style[t.rFlex?i:"width"]=t.rWidth+"px"}),t.$watch("rHeight",function(e){n[0].style[t.rFlex?i:"height"]=t.rHeight+"px"}),n.addClass("resizable");var o,s,a,l,u,d=window.getComputedStyle(n[0],null),c=t.rDirections||["right"],h=t.rCenteredX?2:1,m=t.rCenteredY?2:1,v=t.rGrabber?t.rGrabber:"<span></span>",p={},f=function(e){p.width=!1,p.height=!1,"x"===u?p.width=parseInt(n[0].style[t.rFlex?i:"width"]):p.height=parseInt(n[0].style[t.rFlex?i:"height"]),p.id=n[0].id,p.evt=e},b=function(e){return e.touches?e.touches[0].clientX:e.clientX},g=function(e){return e.touches?e.touches[0].clientY:e.clientY},x=function(r){function d(){t.$emit("angular-resizable.resizing",p)}var c,v="x"===u?a-b(r):a-g(r);switch(l){case"top":c=t.rFlex?i:"height",n[0].style[c]=s+v*m+"px";break;case"bottom":c=t.rFlex?i:"height",n[0].style[c]=s-v*m+"px";break;case"right":c=t.rFlex?i:"width",n[0].style[c]=o-v*h+"px";break;case"left":c=t.rFlex?i:"width",n[0].style[c]=o+v*h+"px"}f(r),t.rNoThrottle?d():e(d)},y=function(e){f(),t.$emit("angular-resizable.resizeEnd",p),t.$apply(),document.removeEventListener("mouseup",y,!1),document.removeEventListener("mousemove",x,!1),document.removeEventListener("touchend",y,!1),document.removeEventListener("touchmove",x,!1),n.removeClass("no-transition")},E=function(e,r){l=r,u="left"===l||"right"===l?"x":"y",a="x"===u?b(e):g(e),o=parseInt(d.getPropertyValue("width")),s=parseInt(d.getPropertyValue("height")),n.addClass("no-transition"),document.addEventListener("mouseup",y,!1),document.addEventListener("mousemove",x,!1),document.addEventListener("touchend",y,!1),document.addEventListener("touchmove",x,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,f(e),t.$emit("angular-resizable.resizeStart",p),t.$apply()},w=function(e,n){var r="true"===t.rDisabled;r||1!==n.which||E(n,e)},z=[];c.forEach(function(e){var t=document.createElement("div");t.setAttribute("class","rg-"+e),t.innerHTML=v,n[0].appendChild(t),t.ondragstart=function(){return!1};var r=w.bind(null,e);z.push({element:t,event:"mousedown",handler:r}),t.addEventListener("mousedown",r,!1)});var F=t.$on("$destroy",function(e,t){z.forEach(function(e){e.element.removeEventListener(e.event,e.handler)}),F&&F()})}}}});